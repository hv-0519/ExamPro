{% extends "admin/admin_base.html" %}

{% block title %}Upload Questions via CSV{% endblock %}

{% block admin_nav_links %}
<a href="{{ url_for('admin.admin_dashboard', username=username) }}">Dashboard</a>
<a href="{{ url_for('admin.admin_exams', username=username) }}">Exams</a>
<a href="{{ url_for('admin.students', username=username) }}">Students</a>
<a href="{{ url_for('admin.risk_analysis', username=username) }}">Risk Analysis</a>
<a href="{{ url_for('admin.behavior_logs', username=username) }}">Behavior Log</a>
<a href="#">Logout</a>
{% endblock %}

{% block content %}

<h1>Upload Questions for Exam: {{ title }}</h1>



{# Simple Upload Form - Always Visible #}
<div style="background: #f4f4f4; padding: 20px; border: 1px solid #ccc;">
    <form method="POST" enctype="multipart/form-data">
        <label><b>Select CSV File:</b></label><br><br>
        <input type="file" name="csv_file" accept=".csv" required>
        <br><br>
        <button type="submit">Upload CSV</button>
    </form>
</div>

<hr>

{% if questions and questions|length > 0 %}
    <h2>Uploaded Questions</h2>
    <table border="1" cellpadding="8" cellspacing="0" width="100%">
        <thead>
            <tr style="background-color: #eee;">
                <th>#</th>
                <th>Question</th>
                <th>A</th>
                <th>B</th>
                <th>C</th>
                <th>D</th>
                <th>Correct</th>
                <th>Explanation</th>
                <th>Marks</th>
            </tr>
        </thead>
        <tbody>
            {% for q in questions %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ q[0] }}</td>
                <td>{{ q[1] }}</td>
                <td>{{ q[2] }}</td>
                <td>{{ q[3] }}</td>
                <td>{{ q[4] }}</td>
                <td>{{ q[5] }}</td>
                <td>{{ q[6] }}</td>
                <td>{{ q[7] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No questions found in the database for this exam.</p>
{% endif %}

<br><br>
<a href="{{ url_for('admin.admin_exams', username=username) }}">‚Üê Back to Exams</a>

{% endblock %}